<!DOCTYPE html>
<html class="no-js css-menubar" lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
  <meta name="description" content="OA系统">
  <meta name="author" content="">

  <title>网络传播系统</title>

  <link rel="apple-touch-icon" href="../base/assets/images/apple-touch-icon.png">
  <link rel="shortcut icon" href="../base/assets/images/favicon.ico">

  <!-- Stylesheets 主要样式-->
  <link rel="stylesheet" href="../global/css/bootstrap.min.css?v2.2.0">
  <link rel="stylesheet" href="../global/css/bootstrap-extend.min.css?v2.2.0">
  <link rel="stylesheet" href="../base/assets/css/site.min.css?v2.2.0">

  <!-- Plugins 效果样式-->
  <link rel="stylesheet" href="../global/vendor/animsition/animsition.min.css?v2.2.0">
  <link rel="stylesheet" href="../global/vendor/asscrollable/asScrollable.min.css?v2.2.0">
  <link rel="stylesheet" href="../global/vendor/waves/waves.min.css?v2.2.0">

  <!-- Page -->
  <link rel="stylesheet" href="../base/assets/css/login.min.css?v2.2.0">


  <!--[if lt IE 9]>
    <script src="global/vendor/html5shiv/html5shiv.min.js"></script>
    <![endif]-->

  <!--[if lt IE 10]>
    <script src="global/vendor/media-match/media.match.min.js"></script>
    <script src="global/vendor/respond/respond.min.js"></script>
    <![endif]-->

  <!-- Scripts -->
  <script src="../global/vendor/modernizr/modernizr.min.js"></script>
  <script src="../global/vendor/breakpoints/breakpoints.min.js"></script>
  <script>
    Breakpoints();
  </script>
</head>
<body class="page-login layout-full">

<!-- Page -->
  <div class="page animsition vertical-align text-center" data-animsition-in="fade-in"
  data-animsition-out="fade-out" id="login_vue">
    <div class="page-content vertical-align-middle">
      <div class="panel" style="width: 100%;">
        <div class="panel-body padding-0">
        	<div class="row row5 clearfix">
        		<div class="col-md-7">
        			<img src="../base/assets/images/login_bg.jpg" width="100%"/>
        		</div>
        		<div class="col-md-5">
        			<div class="padding-20 padding-right-25">
        				<div class="brand">
              
            <h2 class="brand-text font-size-18 blue-500 margin-top-40">欢迎登陆</h2>
          </div>
          <form  novalidate="novalidate" class="margin-top-30">
            <div class="form-group floating">
              <input type="text" class="form-control bg-grey-200" id="username" placeholder="输入账号" v-model='username'/>
               
            </div>
            <div class="form-group floating">
              <input type="password" class="form-control bg-grey-200" id="password"  placeholder="输入密码" v-model='password'/>
               
            </div>
             <div class="form-group floating row">
             	<div class="col-xs-6">
             		<input type="password" class="form-control bg-grey-200" id="checkCode"  placeholder="输入验证码"/>
             	</div>
              <div class="col-xs-6">
              	<img  width="100%" height="36px" class="img-bordered" id="imgVcode"  v-on:click="chValidate"/>
              </div>
               
            </div> 
            <button  type="button"  class="btn btn-primary btn-block margin-top-10 border-radius-0"  v-on:click="toLogin">登录</button>
          </form>
        			</div>
        			 
        		</div>
        	</div>
         
          
        </div>
      </div>

  
      <footer class="page-copyright page-copyright-inverse">
        <p>版权所有  <a href="http://www.chengf.com/">www.chengf.com</a> © 2018 网络传播系统</p>
      </footer>
    </div>
  </div>
  <!-- End Page -->


  <!-- Core  -->
  <script src="../global/vendor/jquery/jquery.min.js"></script>
  <script src="../global/vendor/bootstrap/bootstrap.min.js"></script>
  <script src="../global/vendor/animsition/animsition.min.js"></script>
  <script src="../global/vendor/asscroll/jquery-asScroll.min.js"></script>
  <script src="../global/vendor/mousewheel/jquery.mousewheel.min.js"></script>
  <script src="../global/vendor/asscrollable/jquery.asScrollable.all.min.js"></script>
  <script src="../global/vendor/ashoverscroll/jquery-asHoverScroll.min.js"></script>
  <script src="../global/vendor/waves/waves.min.js"></script>

  <!-- Plugins -->

  <!-- Plugins For This Page -->
  <script src="../global/vendor/jquery-placeholder/jquery.placeholder.min.js"></script>

  <!-- Scripts -->
  <script src="../global/js/core.min.js"></script>
  <script src="../base/assets/js/site.min.js"></script>
  
  <script src="../base/assets/js/common.min.js"></script>
  <script src="https://cdn.bootcss.com/vue/2.4.2/vue.min.js"></script>
  <script src="https://cdn.bootcss.com/vue-resource/1.5.1/vue-resource.min.js"></script>

  <script>
    (function(document, window, $) {
      'use strict';

      var Site = window.Site;
      $(document).ready(function() {
        Site.run();
      });
    })(document, window, jQuery);
    
    
/* 	 $(function(){
	 	 var _t = new Date().getMilliseconds();
	  	 var _ran = _t + '' + Math.round(Math.random()*10) + '' + Math.round(Math.random()*10) + '' + Math.round(Math.random()*10) + '' + Math.round(Math.random()*10);
	     var _u =  "${request.contextPath}/getValidateCode.html?c=lg_" + _ran;
	     $('#ran').val(_ran);
	     $('#imgVcode').attr('src', _u);
	 }) */
	 window.onload = function(){
		 var vm = new Vue({
	        el: '#login_vue',
	        data: {
	        	username:null,
	        	password:null,
	        	msg:'msg',
	        },
	        created:function(){
	        	this.getValidateCode();
	        },
	        methods:{
	        	getValidateCode:function(){
	        		 var _t = new Date().getMilliseconds();
		       	  	 var _ran = _t + '' + Math.round(Math.random()*10) + '' + Math.round(Math.random()*10) + '' + Math.round(Math.random()*10) + '' + Math.round(Math.random()*10);
		       	     var _u =  "${request.contextPath}/getValidateCode.html?c=lg_" + _ran;
		       	     $('#ran').val(_ran);
		       	     $('#imgVcode').attr('src', _u);
	            },
	        	chValidate:function(){
	        		this.getValidateCode();
	        	},
	        	toLogin:function(){
	        		alert("ok");
	        		 //发送post请求
	                this.$http.post('/toLogin.html',{"username":this.username,"password":this.password},{emulateJSON:true}).then(function(res){
	                	if(res.body.code=="0000"){
	                		window.location.href="${request.contextPath}/403.html";
	                	}else{
	                		alert("密码错误");
	                	}
	                },function(){
	                    console.log('请求失败处理');
	                });
	        	},
	        	
	        }
	    })
	}
	 /* function goLogin(){
		 $.ajax({
		        url : "/toLogin.html" , 
		        type : "post",
		        dataType : "json",
				data:{
					"username":$("#username").val(),
					"password":$("#password").val(),
				},
		        success : function(data) {
		        	if(data.code!="0000"){
		        		$("#tips").text(data.message);
		        		getRan();
		        		return false;
		        	}else {
		        		window.location.href="<%=njxBasePath%>/ranking/list";
		        	}
		        }
		    })
	 } */
  </script>
	

  
</body>

</html>